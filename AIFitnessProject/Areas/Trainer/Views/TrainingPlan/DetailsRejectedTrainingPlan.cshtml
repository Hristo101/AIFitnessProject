@using AIFitnessProject.Core.Models.TrainingPlan
@model RejectedTrainingPlanDetails

<style>
    :root {
        /* Актуализирани променливи за светъл фон */
        --main-bg: #f8f9fa;
        --card-bg: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
        --accent: #007bff;
        --text: #343a40;
    }

    body {
        background: var(--main-bg);
        color: var(--text);
        font-family: 'Segoe UI', sans-serif;
        padding: 2rem;
    }

    .exercise-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 2rem;
        perspective: 1000px;
    }

    .exercise-card {
        background: var(--card-bg);
        border-radius: 20px;
        padding: 1.5rem;
        transform-style: preserve-3d;
        transform: rotateX(5deg) rotateY(-5deg) translateZ(0);
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        transition: all 0.3s ease;
        animation: cardEntrance 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

        .exercise-card:hover {
            transform: rotateX(0) rotateY(0) translateZ(20px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
        }

    .exercise-header {
        border-bottom: 2px solid var(--accent);
        padding-bottom: 1rem;
        margin-bottom: 1rem;
    }

    .exercise-name {
        color: var(--accent);
        font-size: 1.5rem;
        margin: 0;
        text-shadow: 0 0 10px rgba(0,123,255,0.3);
    }

    .exercise-detail {
        display: flex;
        justify-content: space-between;
        margin: 0.5rem 0;
        padding: 0.5rem;
        background: rgba(255,255,255,0.05);
        border-radius: 8px;
    }

    .user-feedback {
        background: rgba(0,123,255,0.1);
        border-left: 4px solid var(--accent);
        padding: 1rem;
        margin-top: 1rem;
        border-radius: 8px;
        animation: pulse 2s infinite;
    }

    @@keyframes cardEntrance {
        from {
            opacity: 0;
            transform: translateY(50px) rotateX(15deg);
        }

        to {
            opacity: 1;
            transform: translateY(0) rotateX(5deg) rotateY(-5deg);
        }
    }

    @@keyframes pulse {
        0% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.02);
        }

        100% {
            transform: scale(1);
        }
    }

    @@media (max-width: 768px) {
        .exercise-grid {
            grid-template-columns: 1fr;
        }
    }

    /* Стилове за потребителските данни и тренировъчния план */
    .training-plan-header {
        display: flex;
        align-items: center;
        margin-bottom: 2rem;
        padding: 1rem;
        background: var(--card-bg);
        border: 1px solid rgba(0,0,0,0.1);
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

        .training-plan-header img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--accent);
        }

    .user-info {
        margin-left: 1rem;
    }

        .user-info h2 {
            margin: 0;
            font-size: 1.8rem;
            color: var(--accent);
        }

        .user-info p {
            margin: 0.3rem 0;
        }

    /* Стил за снимката на упражнението */
    .exercise-image {
        width: 100%;
        max-height: 200px;
        object-fit: cover;
        border-radius: 10px;
        margin-bottom: 1rem;
    }

    /* Стил за бутона за редактиране */
    .edit-button {
        display: inline-block;
        margin-top: 1rem;
        padding: 0.5rem 1rem;
        background: var(--accent);
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        transition: background 0.3s ease;
    }

        .edit-button:hover {
            background: #0069d9;
        }
</style>

<!-- Потребителски данни и информация за тренировъчния план -->
<div class="training-plan-header">
    <img src="@Model.UserProfilePicture" alt="@Model.FirstName @Model.LastName" />
    <div class="user-info">
        <h2>@Model.Name</h2>
        <p>От: @Model.FirstName @Model.LastName (@Model.UserEmail)</p>
        <p>@Model.Description</p>
    </div>
</div>

<!-- Упражненията (за всяка тренировка и упражнение) -->
<div class="exercise-grid">
    @foreach (var workout in Model.Workouts)
    {
        foreach (var exercise in workout.Exercises)
        {
            if (!string.IsNullOrEmpty(exercise.Feedback))
            {
                <div class="exercise-card">
                    <div class="exercise-header">
                        <h3 class="exercise-name">@exercise.Name</h3>
                        <!-- Показваме към коя тренировка принадлежи упражнението -->
                        <div class="exercise-detail">
                            <span>Тренировка:</span>
                            <span>@workout.Title</span>
                        </div>
                        <div class="exercise-detail">
                            <span>Серии:</span>
                            <span>@exercise.Series</span>
                        </div>
                        <div class="exercise-detail">
                            <span>Повторения:</span>
                            <span>@exercise.Repetitions</span>
                        </div>
                    </div>

                    @* Ако има снимка на упражнението *@
                    @if (!string.IsNullOrEmpty(exercise.ImageUrl))
                    {
                        <img class="exercise-image" src="@exercise.ImageUrl" alt="@exercise.Name" />
                    }

                    @if (!string.IsNullOrEmpty(exercise.Description))
                    {
                        <p>@exercise.Description</p>
                    }

                    <div class="user-feedback">
                        <strong>Отзив на потребителя:</strong>
                        <p>@exercise.Feedback</p>
                    </div>

                    <!-- Бутон за редактиране на упражнението -->
                    <button class="edit-button">Редактирай</button>
                </div>
            }
        }
    }
</div>
